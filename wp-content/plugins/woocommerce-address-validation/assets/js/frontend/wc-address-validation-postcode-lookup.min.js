(function(){jQuery(document).ready(function(a){"use strict";var b,c,d,e,f,g,h,i,j;return e=a(".wc-address-validation-field"),f=e.find("select"),g=f.parent("p"),c=a(".wc-address-validation-billing-field"),i=a(".wc-address-validation-shipping-field"),d=a('p[id$="_field"], p.create-account').not("#billing_country_field").not("#shipping_country_field"),b=a('p[id^="billing_"][id$="_field"], p.create-account').not("#billing_country_field"),h=a('p[id^="shipping_"][id$="_field"]').not("#shipping_country_field"),j=wc_address_validation_postcode_lookup.countries,setTimeout(function(){return a("#billing_country_field").after(c),a("#shipping_country_field").after(i)},1),a('select[id$="country"], input[id$="country"]').change(function(){if(-1!==a.inArray(a("#billing_country").val(),j)?c.show():c.hide(),-1!==j.indexOf(a("#shipping_country").val())?i.show():i.hide(),wc_address_validation_postcode_lookup.force_postcode_lookup)return b.delay().queue(function(){return-1!==j.indexOf(a("#billing_country").val())&&""===wc_address_validation_postcode_lookup.billing_postcode?a(this).hide():a(this).show(),a(this).dequeue()}),h.delay().queue(function(){return-1!==j.indexOf(a("#shipping_country").val())&&""===wc_address_validation_postcode_lookup.shipping_postcode?a(this).hide():a(this).show(),a(this).dequeue()})}).change(),a().select2&&e.find("select.wc-address-validation-enhanced-select").select2(),g.hide(),e.keypress(function(b){if(13===b.keyCode)return e="billing"===a(this).find(".wc-address-validation-address-type").val()?c:i,e.find("a.button").trigger("click"),!1}),e.on("click","a.button",function(j){var k,l,m;return j.preventDefault(),k=a(this).siblings(".wc-address-validation-address-type").val(),e="billing"===k?c:i,d="billing"===k?b:h,f=e.find("select"),g=f.parent("p"),!(g.is(".processing")||!e.find("input[type=text]").val())&&(g.addClass("processing").block({message:null,overlayCSS:{background:"#fff url( "+wc_address_validation_postcode_lookup.ajax_loader_url+" ) no-repeat center",opacity:.6}}),m={action:"wc_address_validation_lookup_postcode",security:wc_address_validation_postcode_lookup.nonce,postcode:e.find('input[name="wc_address_validation_postcode_lookup_postcode"]').val(),house_number:e.find('input[name="wc_address_validation_postcode_lookup_postcode_house_number"]').val()},"undefined"!=typeof wc_checkout_params?(l=wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","wc_address_validation_lookup_postcode"),delete m.action):l=wc_address_validation_postcode_lookup.ajax_url,a.ajax({type:"GET",url:l,data:m,dataType:"json",success:function(b){var c;if(b)return g.removeClass("processing").unblock(),f.find("option").remove(),g.show(),a(b).map(function(){return a("<option>").val(this.value).text(this.name).data("location",this).appendTo(f)}),c=function(){if(a().select2)return f.trigger("change"),f.select2("open")},!d.is(":visible")&&wc_address_validation_postcode_lookup.force_postcode_lookup&&"none"!==b.value?d.slideDown(null,function(){return c()}):c()}}))}),f.change(function(){var b,c,d;if(d=a(this).hasClass("billing")?"billing":"shipping",c=a(this).find(":selected").data("location"),b=["company","address_1","address_2","address_3","city","postcode","state"],"none"!==c.value)return a.each(b,function(b,e){return a("input[name="+d+"_"+e+"]").val(c[e])}),a(document.body).trigger("update_checkout")})})}).call(this);