(function(){"use strict";jQuery(document).ready(function(a){var b,c,d,e,f,g,h,i;return g=null!=(c=window.wc_avatax_admin)?c:{},h=null!=(d=window.woocommerce_admin)?d:{},i=null!=(e=window.woocommerce_admin_meta_boxes)?e:{},b=null!=(f=window.accounting)?f:{},a("input.wc-avatax-connection-field").each(function(b,c){var d,e,f;return f=a(c).data("wc-avatax-connection-status"),d='<span class="wc-avatax-connection-indicator dashicons"></span>',e="dashicons-no","connected"===f&&(e="dashicons-yes"),a(c).after(d),a(c).siblings(".wc-avatax-connection-indicator").addClass(e)}),a("input#wc_avatax_enable_tax_calculation, input#wc_avatax_enable_address_validation").change(function(b){var c;return c=a(this).parents("tr").nextAll("tr"),a(this).attr("checked")?a(c).show():a(c).hide()}).change(),a("select#wc_avatax_tax_locations").change(function(b){var c;return c=a(this).parents("tr").nextAll("tr"),"specific"===a(this).val()?a(this).parent().parent().next("tr").show():a(this).parent().parent().next("tr").hide()}).change(),a("button.wc-avatax-address-validate").on("click",function(b){var c,d,e,f,h,i,j,k,l,m;return b.preventDefault(),c=a(this),j=a(c).siblings(".indicator"),e=a(c).parents(".forminp-address"),i=a(e).attr("data-address-id"),k=a(e).find("#"+i+"_address_1").val(),d=a(e).find("#"+i+"_city").val(),m=a(e).find("#"+i+"_state").val(),l=a(e).find("#"+i+"_postcode").val(),f=a(e).find("#"+i+"_country").val(),a(e).find("input, select").prop("disabled",!0),a(c).prop("disabled",!0),j.removeClass(),j.addClass("indicator spinner is-active"),h={line1:k,city:d,region:m,postcode:l,country:f,nonce:g.address_nonce,action:"wc_avatax_validate_origin_address"},jQuery.post(g.ajax_url,h,function(b){if(0!==b)return j.removeClass("spinner is-active"),a(e).find("#message").hide(),200===b.code?(a.each(b.address,function(b,c){return a("#"+i+"_"+b).val(c)}),j.addClass("dashicons dashicons-yes")):a(e).prepend('<div id="message" class="error notice is-dismissible"><p>'+b.error+"</p></div>"),a(e).find("input, select").prop("disabled",!1),a(c).prop("disabled",!1)})}),a("#the-list").on("click",".editinline",function(b){var c,d,e;return d=a(this).closest("tr").attr("id"),d=d.replace("post-",""),c=a("#wc_avatax_inline_"+d),e=c.find(".tax_code").text(),a('input[name="_wc_avatax_code"]').val(e)}),a("#woocommerce-order-items").on("change","input.refund_line_total",function(c){var d,e,f;return e=a(this).closest("tr"),f=a(this).val(),d=a(e).find("input.wc_avatax_refund_line_rate").val(),a(e).find('input.refund_line_tax[data-tax_id="avatax"]').val(parseFloat(b.formatNumber(f*d,i.rounding_precision,"")).toString().replace(".",h.mon_decimal_point)).change()})})}).call(this);