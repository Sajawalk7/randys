"use strict";jQuery(function(t){function e(e){var r=JSON.parse(e);if(t(".products-filter__spinner").hide(),t(".products-filter__list").show(),t(".products-filter__list").css("visibility","visible"),t(".product-results").removeClass("product-results--loading"),t(".total-pages").text(r.totalPages),"1"!==t(".total-pages").text()?t(".load-more-products").show():t(".load-more-products").hide(),t(".product-results").html(r.productList),t(".archive-header__count span").html(r.productCount),t(".products-filter__form-item").removeClass("unchanged"),t(".Parent, .Category, .GearRatio").addClass("unchanged"),t("."+r.changedDropdown).addClass("unchanged"),"Parent"===r.changedDropdown?t(".Category, .GearRatio").removeClass("unchanged"):"Category"===r.changedDropdown&&t(".GearRatio").removeClass("unchanged"),t(".products-filter__list > *:not('.products-filter__form-item.unchanged')").remove(),r.filters&&r.filters.length>=1){for(var a=r.filters.length-1;a>=0;a--){var s=r.filters[a].data,l=r.filters[a].label,i=r.filters[a].value;if("Parent"!==i&&i!==r.changedDropdown&&!t("."+i).hasClass("unchanged")){var o=t('<div class="products-filter__form-item '+i+'"><label class="products-filter__label">'+l+"</label></div>"),d=t("<select class='products-filter__select dynamic' data-label='"+l+"' id='"+i+"' name='"+i+"'></select>");t(d).append("<option value=''>ALL</option>");for(var c=s.length-1;c>=0;c--)1===s.length?t(d).append("<option value='"+s[c]+"' selected>"+s[c]+"</option>"):t(d).append("<option value='"+s[c]+"'>"+s[c]+"</option>");t(o).append(d),t(".products-filter__list").append(o)}}t(".products-filter__form-item").each(function(){if(!t(this).hasClass("unchanged")){var e=t(this).attr("class").split(" ")[1];t("."+e+" .products-filter__select").wrap('<div class="products-filter__select-wrap select"></div>')}})}if(r.productIDS){for(var n=[],u=0;u<r.productIDS.length;u++)n.push(r.productIDS[u]);t("#current-ids").attr("data-query-ids",n)}productsSlider.productsSlider(),ellipsis.enableEllipsis()}function r(r){t(".products-filter__spinner").show(),t(".products-filter__list").hide(),t(".product-results").addClass("product-results--loading"),t(".product-results").html('<div class="center-align"><div class="spinner"></div></div>'),t(".load-more-products").hide();for(var a=["year","make","model","drivetype"],i=[],o=0;o<a.length;o++)i.push(a[o]+"="+encodeURIComponent(t("#"+a[o]).val()));for(var d=t("#current-filters .products-filter"),c=d.length-1;c>=0;c--){var n=t(d[c]).data("filter"),u=t(d[c]).data("value");i.push(n+"="+encodeURIComponent(u))}var p=s+"?"+i.join("&");t.ajax({url:p,type:"get",data:{action:"get_product_filter",diffIDSelected:l,changedDropdown:r,parentValue:t("#Parent").val(),categoryValue:t("#Category").val(),uJointTypeValue:t("#UJointType").val(),source:"diff-wizard",selectedSort:t("#orderby").val(),paged:t(".page-numbers.current").text(),nonce:t("#product_filter_nonce").val()},success:e})}function a(){var e=t(this).attr("id");""===t(this).val()?t(".current-filter--"+t(this).attr("id")).remove():"Parent"===t(this).attr("id")||"Category"===t(this).attr("id")||"GearRatio"===t(this).attr("id")?(t("#current-filters .products-filter").remove(),t("#current-filters").append("<p class='products-filter current-filter--"+t(this).attr("id")+"' data-filter='"+t(this).attr("id")+"' data-value='"+t(this).val()+"'></p>")):(t(".products-filter .current-filter--"+e).remove(),t("#current-filters").append("<p class='products-filter current-filter--"+t(this).attr("id")+"' data-filter='"+t(this).attr("id")+"' data-value='"+t(this).val()+"'></p>")),r(e)}var s=wpAjax.ajax_url,l=urlParamChecker.getUrlParameter("diffid");t(document).ready(function(){l&&r()}),t(document).on("change",".products-filter__select",a),t(".products-filter__reset").on("click",function(){t(".products-filter__form-item select").val(""),t("#current-filters").empty(),r()})});