"use strict";jQuery(function(e){function a(){var a=0,n=0;0===parseInt(current_type)?(a=e("input.downloadable-image-checkbox").length,n=e("input.downloadable-image-checkbox:checked").length):(a=e("input.downloadable-app-image-checkbox").length,n=e("input.downloadable-app-image-checkbox:checked").length),e("#btn-download").prop("disabled",0===n),e("#btn-select-all").prop("disabled",n===a),e("#btn-clear-select").prop("disabled",0===n)}function n(){current_type=e("#select_type").val(),e("#downloadable-image").css("display","none"),e("#downloadable-app-image").css("display","none"),0===parseInt(current_type)?e("#downloadable-image").css("display","inline"):e("#downloadable-app-image").css("display","inline"),a()}function o(a){e("#downloadableKey").val(a),e("#download_form").submit()}function d(){if(e("#btn-download").val("GETTING FILES FOR DOWNLOAD..."),e("#btn-download").prop("disabled",!0),0===parseInt(current_type)){var a=e("input.downloadable-image-checkbox:checked"),n=[];a.each(function(a){n.push(e(this).val())}),n=n.join(),e.ajax({method:"post",url:t,data:{action:"prepare_downloadable_image",ids:n,is_product:0===parseInt(current_type)?1:0},success:function(a){e("#btn-download").val("DOWNLOAD SELECTED IMAGES"),e("#btn-download").prop("disabled",!1);var n=JSON.parse(a);o(n.key)},error:function(a,n,o){e("#btn-download").val("DOWNLOAD SELECTED IMAGES"),e("#btn-download").prop("disabled",!1)}})}else{var d=e("input.downloadable-app-image-checkbox:checked"),l=[];d.each(function(a){l.push(e(this).val())}),l=l.join(),e.ajax({method:"post",url:t,data:{action:"prepare_downloadable_app_image",hashes:l,is_product:0===parseInt(current_type)?1:0},success:function(a){e("#btn-download").val("DOWNLOAD SELECTED IMAGES"),e("#btn-download").prop("disabled",!1);var n=JSON.parse(a);o(n.key)},error:function(a,n,o){e("#btn-download").val("DOWNLOAD SELECTED IMAGES"),e("#btn-download").prop("disabled",!1)}})}}function l(){0===parseInt(current_type)?e(".downloadable-image-checkbox").prop("checked",!0):e(".downloadable-app-image-checkbox").prop("checked",!0),a()}function c(){0===parseInt(current_type)?e(".downloadable-image-checkbox").prop("checked",!1):e(".downloadable-app-image-checkbox").prop("checked",!1),a()}var t=wpAjax.ajax_url;e(document).ready(function(){0<e("#select_type").length&&(e("#select_type").on("change",n),e("#btn-download").on("click",d),e("#btn-select-all").on("click",l),e("#btn-clear-select").on("click",c),e("input.downloadable-image-checkbox").on("change",a),e("input.downloadable-app-image-checkbox").on("change",a),a())}),0<e("#select_type").length&&n()});